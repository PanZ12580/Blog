{"version":3,"sources":["webpack:///./src/components/comment/ReplyForm.vue?d110","webpack:///src/components/comment/ReplyForm.vue","webpack:///./src/components/comment/ReplyForm.vue?963c","webpack:///./src/components/comment/ReplyForm.vue","webpack:///./src/network/commentAjax.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","placeholderMsg","domProps","on","$event","target","composing","content","class","disabled","hasUser","user","$set","cancelReply","_v","_e","submitForm","staticRenderFns","data","type","Object","default","nickname","email","props","blogId","parentCommentId","parentCommentNickname","parentComment","computed","mounted","getUserMsg","$","popup","position","form","fields","identifier","rules","methods","res","validate","commentSubmit","messageSubmit","console","log","parentMsgId","parentMessage","$emit","resetData","assign","$data","$options","component","saveComment","comment","request","url","method","contentType","findCommentListByBlogId","params"],"mappings":"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","file":"js/chunk-f7fe2eee.b8ec2a75.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui reply form\"},[_c('div',{staticClass:\"field\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"name\":\"content\",\"placeholder\":_vm.placeholderMsg},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]),_c('div',{staticClass:\"fields\"},[_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui left icon input\",class:{disabled: _vm.hasUser}},[_c('i',{staticClass:\"user icon\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.nickname),expression:\"user.nickname\"}],attrs:{\"type\":\"text\",\"name\":\"nickname\",\"placeholder\":\"姓名\"},domProps:{\"value\":(_vm.user.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"nickname\", $event.target.value)}}})])]),_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui left icon input\"},[_c('i',{staticClass:\"icon mail\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.email),expression:\"user.email\"}],attrs:{\"type\":\"email\",\"name\":\"email\",\"placeholder\":\"邮箱\"},domProps:{\"value\":(_vm.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"email\", $event.target.value)}}})])]),(_vm.parentCommentId)?_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui labeled icon button m-mobile-wide\",on:{\"click\":_vm.cancelReply}},[_c('i',{staticClass:\"icon close\"}),_vm._v(\" 取消 回复 \")])]):_vm._e(),_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui blue labeled icon button m-mobile-wide\",on:{\"click\":_vm.submitForm}},[_c('i',{staticClass:\"icon edit\"}),_vm._v(\" 添加 回复 \")])])]),_c('div',{staticClass:\"ui error message\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ui reply form\">\r\n    <div class=\"field\">\r\n      <textarea name=\"content\" :placeholder=\"placeholderMsg\" v-model=\"content\"></textarea>\r\n    </div>\r\n    <div class=\"fields\">\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\">\r\n        <div class=\"ui left icon input\" :class=\"{disabled: hasUser}\">\r\n          <i class=\"user icon\"></i>\r\n          <input type=\"text\" name=\"nickname\" placeholder=\"姓名\" v-model=\"user.nickname\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\">\r\n        <div class=\"ui left icon input\">\r\n          <i class=\"icon mail\"></i>\r\n          <input type=\"email\" name=\"email\" placeholder=\"邮箱\" v-model=\"user.email\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\" v-if=\"parentCommentId\">\r\n        <div class=\"ui labeled icon button m-mobile-wide\" @click=\"cancelReply\">\r\n          <i class=\"icon close\"></i> 取消 回复\r\n        </div>\r\n      </div>\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\">\r\n        <div class=\"ui blue labeled icon button m-mobile-wide\" @click=\"submitForm\">\r\n          <i class=\"icon edit\"></i> 添加 回复\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"ui error message\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { saveComment } from \"network/commentAjax\";\r\nimport { findUserMsg } from \"network/userAjax\";\r\n\r\nimport { saveMessage } from \"network/messageAjax\";\r\n\r\nexport default {\r\n  name: \"ReplyForm\",\r\n  data() {\r\n    return {\r\n      hasUser: false,\r\n      content: \"\",\r\n      user: {\r\n        type: Object,\r\n        default() {\r\n          return {\r\n            nickname: \"\",\r\n            email: \"\"\r\n          };\r\n        }\r\n      }\r\n    };\r\n  },\r\n  props: {\r\n    blogId: null,\r\n    parentCommentId: null,\r\n    parentCommentNickname: null,\r\n    parentComment: null\r\n  },\r\n  computed: {\r\n    placeholderMsg() {\r\n      return this.parentCommentNickname\r\n        ? \"@\" + this.parentCommentNickname + \"：\"\r\n        : \"请输入评论信息...\";\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getUserMsg();\r\n    // nickname popup\r\n    $('[name=\"nickname\"]').popup({\r\n      on: \"click\",\r\n      content: \"此名称将作为您在本站的常用名，不支持再修改~~\",\r\n      position: \"top center\"\r\n    });\r\n    //    email popup\r\n    $('[name=\"email\"]').popup({\r\n      on: \"click\",\r\n      content: \"有回复内容将通过此邮箱通知你\",\r\n      position: \"top center\"\r\n    });\r\n    // 表单校验规则\r\n    $(\".ui.form\").form({\r\n      fields: {\r\n        content: {\r\n          identifier: \"content\",\r\n          rules: [\r\n            {\r\n              type: \"empty\",\r\n              prompt: \"请输入评论内容\"\r\n            }\r\n          ]\r\n        },\r\n        nickname: {\r\n          identifier: \"nickname\",\r\n          rules: [\r\n            {\r\n              type: \"empty\",\r\n              prompt: \"请输入名称\"\r\n            }\r\n          ]\r\n        },\r\n        email: {\r\n          identifier: \"email\",\r\n          rules: [\r\n            {\r\n              type: \"email\",\r\n              prompt: \"请输入正确的邮箱\"\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取用户信息\r\n     */\r\n    getUserMsg() {\r\n      findUserMsg().then(res => {\r\n        if (res.data.data) {\r\n          this.user = res.data.data;\r\n          this.hasUser = true;\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 表单提交\r\n     */\r\n    submitForm() {\r\n      let validate = $(\".ui.form\").form(\"validate form\");\r\n      if (validate) {\r\n        if (this.blogId) {\r\n          this.commentSubmit();\r\n        } else {\r\n          this.messageSubmit();\r\n        }\r\n      } else {\r\n        console.log(\"校验失败\");\r\n      }\r\n    },\r\n    /**\r\n     * 博客内评论提交\r\n     */\r\n    commentSubmit() {\r\n      const comment = {\r\n        blogId: this.blogId,\r\n        parentCommentId: this.parentCommentId,\r\n        content: this.content,\r\n        user: this.user,\r\n        parentComment: this.parentComment\r\n      };\r\n      saveComment(comment).then(res => {\r\n        this.$emit(\"scrollToComment\");\r\n        this.$emit(\"resetParentComment\");\r\n        this.$emit(\"reRequestComment\");\r\n        this.resetData();\r\n        this.getUserMsg();\r\n      });\r\n    },\r\n    /**\r\n     * 留言区留言或评论提交\r\n     */\r\n    messageSubmit() {\r\n      const message = {\r\n        parentMsgId: this.parentCommentId,\r\n        content: this.content,\r\n        user: this.user,\r\n        parentMessage: this.parentComment\r\n      };\r\n      saveMessage(message).then(res => {\r\n        this.$emit(\"scrollToComment\");\r\n        this.$emit(\"resetParentComment\");\r\n        this.$emit(\"reRequestComment\");\r\n        this.$emit(\"openComment\", this.parentCommentId);\r\n        this.resetData();\r\n        this.getUserMsg();\r\n      });\r\n    },\r\n    /**\r\n     * 回复取消\r\n     */\r\n    cancelReply() {\r\n      this.content = \"\";\r\n      this.$emit(\"resetParentComment\");\r\n    },\r\n    /**\r\n     * 重置data\r\n     */\r\n    resetData() {\r\n      Object.assign(this.$data, this.$options.data());\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReplyForm.vue?vue&type=template&id=62bc65dd&\"\nimport script from \"./ReplyForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ReplyForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {\r\n  request\r\n} from \"./request\"\r\n\r\n// 保存评论\r\nexport function saveComment(comment) {\r\n  return request({\r\n    url: \"/comment/saveComment\",\r\n    method: \"PUT\",\r\n    contentType: \"application/json\",\r\n    data: {\r\n      ...comment,\r\n    }\r\n  })\r\n}\r\n\r\n// 通过博客Id查询博客下的评论列表\r\nexport function findCommentListByBlogId(blogId) {\r\n  return request({\r\n    url: \"/comment/findCommentListByBlogId\",\r\n    params: {\r\n      blogId\r\n    }\r\n  })\r\n}"],"sourceRoot":""}