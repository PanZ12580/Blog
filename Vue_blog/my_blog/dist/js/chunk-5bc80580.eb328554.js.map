{"version":3,"sources":["webpack:///./src/components/comment/CommentArea.vue?0578","webpack:///./src/components/comment/ReplyForm.vue?d110","webpack:///src/components/comment/ReplyForm.vue","webpack:///./src/components/comment/ReplyForm.vue?963c","webpack:///./src/components/comment/ReplyForm.vue","webpack:///./src/components/comment/Comment.vue?109f","webpack:///./src/components/comment/CommentArea.vue?ff78","webpack:///src/components/comment/CommentArea.vue","webpack:///./src/components/comment/CommentArea.vue?f43d","webpack:///./src/components/comment/CommentArea.vue","webpack:///src/components/comment/Comment.vue","webpack:///./src/components/comment/Comment.vue?3bde","webpack:///./src/components/comment/Comment.vue","webpack:///./src/network/messageAjax.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","attrs","placeholderMsg","domProps","on","$event","target","composing","content","class","disabled","hasUser","user","$set","cancelReply","_v","_e","submitForm","staticRenderFns","data","type","Object","default","nickname","email","props","blogId","parentCommentId","parentCommentNickname","parentComment","computed","mounted","getUserMsg","$","popup","position","form","fields","identifier","rules","methods","res","validate","commentSubmit","messageSubmit","console","log","parentMsgId","parentMessage","$emit","resetData","assign","$data","$options","component","_b","ref","reply","$attrs","_g","scrollToComment","resetParentComment","$listeners","commentList","length","staticStyle","_l","item","index","key","id","avatar","_s","toFormatDate","createTime","childComments","item2","Array","components","CommentArea","ReplyForm","$refs","commentArea","$el","scrollIntoView","behavior","block","inline","comment","replyForm","querySelector","focus","saveMessage","message","request","url","method","contentType","findMessageList"],"mappings":"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","file":"js/chunk-5bc80580.eb328554.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentArea.vue?vue&type=style&index=0&id=aa0e8124&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentArea.vue?vue&type=style&index=0&id=aa0e8124&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui reply form\"},[_c('div',{staticClass:\"field\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.content),expression:\"content\"}],attrs:{\"name\":\"content\",\"placeholder\":_vm.placeholderMsg},domProps:{\"value\":(_vm.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.content=$event.target.value}}})]),_c('div',{staticClass:\"fields\"},[_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui left icon input\",class:{disabled: _vm.hasUser}},[_c('i',{staticClass:\"user icon\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.nickname),expression:\"user.nickname\"}],attrs:{\"type\":\"text\",\"name\":\"nickname\",\"placeholder\":\"姓名\"},domProps:{\"value\":(_vm.user.nickname)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"nickname\", $event.target.value)}}})])]),_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui left icon input\"},[_c('i',{staticClass:\"icon mail\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.email),expression:\"user.email\"}],attrs:{\"type\":\"email\",\"name\":\"email\",\"placeholder\":\"邮箱\"},domProps:{\"value\":(_vm.user.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"email\", $event.target.value)}}})])]),(_vm.parentCommentId)?_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui labeled icon button m-mobile-wide\",on:{\"click\":_vm.cancelReply}},[_c('i',{staticClass:\"icon close\"}),_vm._v(\" 取消 回复 \")])]):_vm._e(),_c('div',{staticClass:\"field m-mobile-wide m-margin-bottom-small\"},[_c('div',{staticClass:\"ui blue labeled icon button m-mobile-wide\",on:{\"click\":_vm.submitForm}},[_c('i',{staticClass:\"icon edit\"}),_vm._v(\" 添加 回复 \")])])]),_c('div',{staticClass:\"ui error message\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"ui reply form\">\r\n    <div class=\"field\">\r\n      <textarea name=\"content\" :placeholder=\"placeholderMsg\" v-model=\"content\"></textarea>\r\n    </div>\r\n    <div class=\"fields\">\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\">\r\n        <div class=\"ui left icon input\" :class=\"{disabled: hasUser}\">\r\n          <i class=\"user icon\"></i>\r\n          <input type=\"text\" name=\"nickname\" placeholder=\"姓名\" v-model=\"user.nickname\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\">\r\n        <div class=\"ui left icon input\">\r\n          <i class=\"icon mail\"></i>\r\n          <input type=\"email\" name=\"email\" placeholder=\"邮箱\" v-model=\"user.email\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\" v-if=\"parentCommentId\">\r\n        <div class=\"ui labeled icon button m-mobile-wide\" @click=\"cancelReply\">\r\n          <i class=\"icon close\"></i> 取消 回复\r\n        </div>\r\n      </div>\r\n      <div class=\"field m-mobile-wide m-margin-bottom-small\">\r\n        <div class=\"ui blue labeled icon button m-mobile-wide\" @click=\"submitForm\">\r\n          <i class=\"icon edit\"></i> 添加 回复\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"ui error message\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { saveComment } from \"network/commentAjax\";\r\nimport { findUserMsg } from \"network/userAjax\";\r\n\r\nimport { saveMessage } from \"network/messageAjax\";\r\n\r\nexport default {\r\n  name: \"ReplyForm\",\r\n  data() {\r\n    return {\r\n      hasUser: false,\r\n      content: \"\",\r\n      user: {\r\n        type: Object,\r\n        default() {\r\n          return {\r\n            nickname: \"\",\r\n            email: \"\"\r\n          };\r\n        }\r\n      }\r\n    };\r\n  },\r\n  props: {\r\n    blogId: null,\r\n    parentCommentId: null,\r\n    parentCommentNickname: null,\r\n    parentComment: null\r\n  },\r\n  computed: {\r\n    placeholderMsg() {\r\n      return this.parentCommentNickname\r\n        ? \"@\" + this.parentCommentNickname + \"：\"\r\n        : \"请输入评论信息...\";\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getUserMsg();\r\n    // nickname popup\r\n    $('[name=\"nickname\"]').popup({\r\n      on: \"click\",\r\n      content: \"此名称将作为您在本站的常用名，不支持再修改~~\",\r\n      position: \"top center\"\r\n    });\r\n    //    email popup\r\n    $('[name=\"email\"]').popup({\r\n      on: \"click\",\r\n      content: \"有回复内容将通过此邮箱通知你\",\r\n      position: \"top center\"\r\n    });\r\n    // 表单校验规则\r\n    $(\".ui.form\").form({\r\n      fields: {\r\n        content: {\r\n          identifier: \"content\",\r\n          rules: [\r\n            {\r\n              type: \"empty\",\r\n              prompt: \"请输入评论内容\"\r\n            }\r\n          ]\r\n        },\r\n        nickname: {\r\n          identifier: \"nickname\",\r\n          rules: [\r\n            {\r\n              type: \"empty\",\r\n              prompt: \"请输入名称\"\r\n            }\r\n          ]\r\n        },\r\n        email: {\r\n          identifier: \"email\",\r\n          rules: [\r\n            {\r\n              type: \"email\",\r\n              prompt: \"请输入正确的邮箱\"\r\n            }\r\n          ]\r\n        }\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取用户信息\r\n     */\r\n    getUserMsg() {\r\n      findUserMsg().then(res => {\r\n        if (res.data.data) {\r\n          this.user = res.data.data;\r\n          this.hasUser = true;\r\n        }\r\n      });\r\n    },\r\n    /**\r\n     * 表单提交\r\n     */\r\n    submitForm() {\r\n      let validate = $(\".ui.form\").form(\"validate form\");\r\n      if (validate) {\r\n        if (this.blogId) {\r\n          this.commentSubmit();\r\n        } else {\r\n          this.messageSubmit();\r\n        }\r\n      } else {\r\n        console.log(\"校验失败\");\r\n      }\r\n    },\r\n    /**\r\n     * 博客内评论提交\r\n     */\r\n    commentSubmit() {\r\n      const comment = {\r\n        blogId: this.blogId,\r\n        parentCommentId: this.parentCommentId,\r\n        content: this.content,\r\n        user: this.user,\r\n        parentComment: this.parentComment\r\n      };\r\n      saveComment(comment).then(res => {\r\n        this.$emit(\"scrollToComment\");\r\n        this.$emit(\"resetParentComment\");\r\n        this.$emit(\"reRequestComment\");\r\n        this.resetData();\r\n        this.getUserMsg();\r\n      });\r\n    },\r\n    /**\r\n     * 留言区留言或评论提交\r\n     */\r\n    messageSubmit() {\r\n      const message = {\r\n        parentMsgId: this.parentCommentId,\r\n        content: this.content,\r\n        user: this.user,\r\n        parentMessage: this.parentComment\r\n      };\r\n      saveMessage(message).then(res => {\r\n        this.$emit(\"scrollToComment\");\r\n        this.$emit(\"resetParentComment\");\r\n        this.$emit(\"reRequestComment\");\r\n        this.$emit(\"openComment\", this.parentCommentId);\r\n        this.resetData();\r\n        this.getUserMsg();\r\n      });\r\n    },\r\n    /**\r\n     * 回复取消\r\n     */\r\n    cancelReply() {\r\n      this.content = \"\";\r\n      this.$emit(\"resetParentComment\");\r\n    },\r\n    /**\r\n     * 重置data\r\n     */\r\n    resetData() {\r\n      Object.assign(this.$data, this.$options.data());\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReplyForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReplyForm.vue?vue&type=template&id=62bc65dd&\"\nimport script from \"./ReplyForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ReplyForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ui bottom attached segment m-bg\"},[_c('comment-area',_vm._b({ref:\"commentArea\",on:{\"reply\":_vm.reply}},'comment-area',_vm.$attrs,false)),_c('reply-form',_vm._g({ref:\"replyForm\",attrs:{\"parentCommentId\":_vm.parentCommentId,\"parentCommentNickname\":_vm.parentCommentNickname,\"parentComment\":_vm.parentComment,\"blogId\":_vm.blogId},on:{\"scrollToComment\":_vm.scrollToComment,\"resetParentComment\":_vm.resetParentComment}},_vm.$listeners))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.commentList.length !== 0)?_c('div',{staticClass:\"ui teal segment m-bg\",attrs:{\"id\":\"comment_area\"}},[_c('div',{staticClass:\"ui threaded comments\",staticStyle:{\"max-width\":\"100% !important\"}},[_c('h3',{staticClass:\"ui dividing header\"},[_vm._v(\"评论\")]),_vm._l((_vm.commentList),function(item,index){return _c('div',{key:item.id + '-' + index,staticClass:\"comment\"},[_c('a',{staticClass:\"avatar\"},[_c('img',{staticClass:\"comment-avatar\",attrs:{\"src\":item.user.avatar,\"alt\":\"\"}})]),_c('div',{staticClass:\"content\"},[_c('a',{staticClass:\"author\",on:{\"click\":function($event){return _vm.reply(item.id, item.user.nickname, item)}}},[_c('span',{domProps:{\"textContent\":_vm._s(item.user.nickname)}}),(item.adminComment)?_c('div',{staticClass:\"ui basic left pointing label\"},[_vm._v(\"御主\")]):_vm._e()]),_c('div',{staticClass:\"metadata\"},[_c('span',{staticClass:\"date\",domProps:{\"textContent\":_vm._s(_vm.toFormatDate(item.createTime))}})]),_c('pre',{staticClass:\"text\",domProps:{\"textContent\":_vm._s(item.content)}}),_c('div',{staticClass:\"actions\"},[_c('a',{staticClass:\"reply m_reply\",on:{\"click\":function($event){return _vm.reply(item.id, item.user.nickname, item)}}},[_vm._v(\"回复\")])])]),(item.childComments && item.childComments.length !== 0)?_c('div',{staticClass:\"comments\"},_vm._l((item.childComments),function(item2,index){return _c('div',{key:item2.id + '-' + index,staticClass:\"comment\"},[_c('a',{staticClass:\"avatar\"},[_c('img',{staticClass:\"comment-avatar\",attrs:{\"src\":item2.user.avatar,\"alt\":\"\"}})]),_c('div',{staticClass:\"content\"},[_c('span',[_c('a',{staticClass:\"author\",domProps:{\"textContent\":_vm._s(item2.user.nickname)},on:{\"click\":function($event){return _vm.reply(item2.id, item2.user.nickname, item2)}}}),(item2.adminComment)?_c('div',{staticClass:\"ui basic left pointing label\"},[_vm._v(\"御主\")]):_vm._e(),_c('span',{staticClass:\"parent-comment\",domProps:{\"textContent\":_vm._s(' @ ' + item2.parentComment.user.nickname)}})]),_c('div',{staticClass:\"metadata\"},[_c('span',{staticClass:\"date\",domProps:{\"textContent\":_vm._s(_vm.toFormatDate(item2.createTime))}})]),_c('pre',{staticClass:\"text\",domProps:{\"textContent\":_vm._s(item2.content)}}),_c('div',{staticClass:\"actions\"},[_c('a',{staticClass:\"reply m_reply\",on:{\"click\":function($event){return _vm.reply(item2.id, item2.user.nickname, item2)}}},[_vm._v(\"回复\")])])])])}),0):_vm._e()])})],2)]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"comment_area\" class=\"ui teal segment m-bg\" v-if=\"commentList.length !== 0\">\r\n    <div class=\"ui threaded comments\" style=\"max-width: 100% !important;\">\r\n      <h3 class=\"ui dividing header\">评论</h3>\r\n      <div class=\"comment\" v-for=\"(item, index) in commentList\" :key=\"item.id + '-' + index\">\r\n        <a class=\"avatar\">\r\n          <img :src=\"item.user.avatar\" alt class=\"comment-avatar\" />\r\n        </a>\r\n        <div class=\"content\">\r\n          <a class=\"author\" @click=\"reply(item.id, item.user.nickname, item)\">\r\n            <span v-text=\"item.user.nickname\"></span>\r\n            <div class=\"ui basic left pointing label\" v-if=\"item.adminComment\">御主</div>\r\n          </a>\r\n          <div class=\"metadata\">\r\n            <span class=\"date\" v-text=\"toFormatDate(item.createTime)\"></span>\r\n          </div>\r\n          <pre class=\"text\" v-text=\"item.content\"></pre>\r\n          <div class=\"actions\">\r\n            <a class=\"reply m_reply\" @click=\"reply(item.id, item.user.nickname, item)\">回复</a>\r\n          </div>\r\n        </div>\r\n        <div class=\"comments\" v-if=\"item.childComments && item.childComments.length !== 0\">\r\n          <div\r\n            class=\"comment\"\r\n            v-for=\"(item2, index) in item.childComments\"\r\n            :key=\"item2.id + '-' + index\"\r\n          >\r\n            <a class=\"avatar\">\r\n              <img :src=\"item2.user.avatar\" class=\"comment-avatar\" alt />\r\n            </a>\r\n            <div class=\"content\">\r\n              <span>\r\n                <a\r\n                  class=\"author\"\r\n                  v-text=\"item2.user.nickname\"\r\n                  @click=\"reply(item2.id, item2.user.nickname, item2)\"\r\n                ></a>\r\n                <div class=\"ui basic left pointing label\" v-if=\"item2.adminComment\">御主</div>\r\n                <span v-text=\"' @ ' + item2.parentComment.user.nickname\" class=\"parent-comment\"></span>\r\n              </span>\r\n              <div class=\"metadata\">\r\n                <span class=\"date\" v-text=\"toFormatDate(item2.createTime)\"></span>\r\n              </div>\r\n              <pre class=\"text\" v-text=\"item2.content\"></pre>\r\n              <div class=\"actions\">\r\n                <a class=\"reply m_reply\" @click=\"reply(item2.id, item2.user.nickname, item2)\">回复</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { formatDate } from \"common/utils\";\r\n\r\nexport default {\r\n  name: \"CommentArea\",\r\n  props: {\r\n    commentList: {\r\n      type: Array,\r\n      default() {\r\n        return [];\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    reply(id, nickname, parentComment) {\r\n      this.$emit(\"reply\", {\r\n        id,\r\n        nickname,\r\n        parentComment\r\n      });\r\n    },\r\n    /**\r\n     * 时间格式化\r\n     */\r\n    toFormatDate(timestamp) {\r\n      return formatDate(new Date(timestamp), \"yyyy-MM-dd hh:mm:ss\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.comment-avatar {\r\n  margin-right: 0.25em !important;\r\n  display: inline-block !important;\r\n  width: 2em !important;\r\n  height: 2em !important;\r\n  border-radius: 500rem !important;\r\n}\r\n.parent-comment {\r\n  color: #19d3cc;\r\n  font-weight: 500;\r\n}\r\n.left.pointing.label {\r\n  padding: 0.3em;\r\n  color: #f3b31e;\r\n  border-color: #f3b31e;\r\n}\r\npre {\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentArea.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CommentArea.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommentArea.vue?vue&type=template&id=aa0e8124&scoped=true&\"\nimport script from \"./CommentArea.vue?vue&type=script&lang=js&\"\nexport * from \"./CommentArea.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CommentArea.vue?vue&type=style&index=0&id=aa0e8124&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"aa0e8124\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"ui bottom attached segment m-bg\">\r\n    <comment-area ref=\"commentArea\" @reply=\"reply\" v-bind=\"$attrs\"></comment-area>\r\n    <reply-form\r\n      :parentCommentId=\"parentCommentId\"\r\n      :parentCommentNickname=\"parentCommentNickname\"\r\n      :parentComment=\"parentComment\"\r\n      :blogId=\"blogId\"\r\n      @scrollToComment=\"scrollToComment\"\r\n      @resetParentComment=\"resetParentComment\"\r\n      ref=\"replyForm\"\r\n      v-on=\"$listeners\"\r\n    ></reply-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CommentArea from \"./CommentArea\";\r\nimport ReplyForm from \"./ReplyForm\";\r\n\r\nexport default {\r\n  name: \"Comment\",\r\n  data() {\r\n    return {\r\n      parentCommentId: null,\r\n      parentCommentNickname: \"\",\r\n      parentComment: null\r\n    };\r\n  },\r\n  props: {\r\n    blogId: null\r\n  },\r\n  components: {\r\n    CommentArea,\r\n    ReplyForm\r\n  },\r\n  methods: {\r\n    /**\r\n     * 滚动到评论区\r\n     */\r\n    scrollToComment() {\r\n      this.$refs.commentArea.$el.scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"start\",\r\n        inline: \"nearest\"\r\n      });\r\n    },\r\n    /**\r\n     * 重置parentCommentId、parentCommentNickname\r\n     */\r\n    resetParentComment() {\r\n      Object.assign(this.$data, this.$options.data());\r\n    },\r\n    reply(comment) {\r\n      this.parentCommentId = comment.id;\r\n      this.parentCommentNickname = comment.nickname;\r\n      this.parentComment = comment.parentComment;\r\n      this.$refs.replyForm.$el.scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"end\",\r\n        inline: \"nearest\"\r\n      });\r\n      this.$refs.replyForm.$el.querySelector(\"textarea\").focus();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=01bcde14&\"\nimport script from \"./Comment.vue?vue&type=script&lang=js&\"\nexport * from \"./Comment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {\r\n  request\r\n} from \"./request\"\r\n\r\n// 保存留言内容\r\nexport function saveMessage(message) {\r\n  return request({\r\n    url: \"/message/saveMessage\",\r\n    method: \"PUT\",\r\n    contentType: \"application/json\",\r\n    data: {\r\n      ...message,\r\n    }\r\n  })\r\n}\r\n\r\n// 查询留言列表\r\nexport function findMessageList() {\r\n  return request({\r\n    url: \"/message/findMessageList\"\r\n  })\r\n}"],"sourceRoot":""}